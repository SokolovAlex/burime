{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar __jsx = React.createElement;\nimport React, { useState, useCallback, useRef } from 'react';\nimport { UserCircle } from '@styled-icons/fa-solid/UserCircle';\nimport { LogOut } from '@styled-icons/boxicons-regular/LogOut';\nimport { Settings } from '@styled-icons/material/Settings';\nimport { OpenBook } from '@styled-icons/entypo/OpenBook';\nimport { Edit } from '@styled-icons/boxicons-regular/Edit';\nimport { Spreadsheet } from '@styled-icons/boxicons-regular/Spreadsheet';\nimport { PencilRuler } from '@styled-icons/remix-line/PencilRuler';\nimport { useClickAway } from 'react-use';\nimport { AvatarHost, AvatarMenuWrapper, AvatarMenuItem, AvatarName, AvatarMenuText } from './styled';\nimport { signOut } from '../../../services/api/auth';\nimport { error } from '../../../services/toast';\nimport { ChevronIcon } from '../../Common/styled';\nexport var Avatar = function Avatar(_ref) {\n  var user = _ref.user;\n\n  var _useState = useState(false),\n      open = _useState[0],\n      setOpen = _useState[1];\n\n  var toggleOpen = useCallback(function () {\n    return setOpen(!open);\n  }, [open]);\n  var ref = useRef(null);\n  useClickAway(ref, function () {\n    return setOpen(false);\n  });\n  var logOut = useCallback(function _callee() {\n    var _ref2, status, data;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(signOut());\n\n          case 3:\n            _ref2 = _context.sent;\n            status = _ref2.status;\n            data = _ref2.data;\n\n            if (!(status !== 200)) {\n              _context.next = 9;\n              break;\n            }\n\n            error('Ошибка', data.message);\n            return _context.abrupt(\"return\");\n\n          case 9:\n            document.location.reload(true);\n            _context.next = 14;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](0);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 12]]);\n  }, []);\n  return React.createElement(\"div\", {\n    ref: ref\n  }, React.createElement(AvatarHost, {\n    onClick: toggleOpen\n  }, React.createElement(UserCircle, {\n    width: 24\n  }), React.createElement(AvatarName, null, user.name), React.createElement(ChevronIcon, {\n    open: open\n  })), React.createElement(AvatarMenuWrapper, {\n    open: open\n  }, React.createElement(AvatarMenuItem, {\n    href: \"/calls\"\n  }, React.createElement(Edit, {\n    width: 16\n  }), React.createElement(AvatarMenuText, null, \"\\u0432\\u044B\\u0437\\u043E\\u0432\\u044B\")), React.createElement(AvatarMenuItem, {\n    href: \"/all\"\n  }, React.createElement(Spreadsheet, {\n    width: 16\n  }), React.createElement(AvatarMenuText, null, \"\\u0432\\u0441\\u0435 \\u0431\\u0443\\u0440\\u0438\\u043C\\u0435\")), React.createElement(AvatarMenuItem, {\n    href: \"/my\"\n  }, React.createElement(OpenBook, {\n    width: 16\n  }), React.createElement(AvatarMenuText, null, \"\\u043C\\u043E\\u0438\")), React.createElement(AvatarMenuItem, {\n    href: \"/rules\"\n  }, React.createElement(PencilRuler, {\n    width: 16\n  }), React.createElement(AvatarMenuText, null, \"\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0430\")), React.createElement(AvatarMenuItem, {\n    href: \"/settings\"\n  }, React.createElement(Settings, {\n    width: 16\n  }), React.createElement(AvatarMenuText, null, \"\\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\")), React.createElement(AvatarMenuItem, {\n    onClick: logOut\n  }, React.createElement(LogOut, {\n    width: 16\n  }), React.createElement(AvatarMenuText, null, \"\\u0432\\u044B\\u0439\\u0442\\u0438\"))));\n};","map":null,"metadata":{},"sourceType":"module"}