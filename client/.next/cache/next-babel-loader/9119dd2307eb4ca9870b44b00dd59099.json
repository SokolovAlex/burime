{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"C:\\\\Users\\\\alexs\\\\Desktop\\\\\\u0410\\u043B\\u0435\\u043A\\u0441\\u0435\\u0439\\\\code\\\\burime\\\\client\\\\components\\\\Header\\\\Avatar\\\\Avatar.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState, useCallback, useRef } from 'react';\nimport { UserCircle } from '@styled-icons/fa-solid/UserCircle';\nimport { LogOut } from '@styled-icons/boxicons-regular/LogOut';\nimport { Settings } from '@styled-icons/material/Settings';\nimport { OpenBook } from '@styled-icons/entypo/OpenBook';\nimport { Edit } from '@styled-icons/boxicons-regular/Edit';\nimport { Spreadsheet } from '@styled-icons/boxicons-regular/Spreadsheet';\nimport { PencilRuler } from '@styled-icons/remix-line/PencilRuler';\nimport { useClickAway } from 'react-use';\nimport { AvatarHost, AvatarMenuWrapper, AvatarMenuItem, AvatarName, AvatarMenuText } from './styled';\nimport { signOut } from '../../../services/api/auth';\nimport { error } from '../../../services/toast';\nimport { ChevronIcon } from '../../Common/styled';\nexport var Avatar = function Avatar(_ref) {\n  var user = _ref.user;\n\n  var _useState = useState(false),\n      open = _useState[0],\n      setOpen = _useState[1];\n\n  var toggleOpen = useCallback(function () {\n    return setOpen(!open);\n  }, [open]);\n  var ref = useRef(null);\n  useClickAway(ref, function () {\n    return setOpen(false);\n  });\n  var logOut = useCallback(function _callee() {\n    var _ref2, status, data;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(signOut());\n\n          case 3:\n            _ref2 = _context.sent;\n            status = _ref2.status;\n            data = _ref2.data;\n\n            if (!(status !== 200)) {\n              _context.next = 9;\n              break;\n            }\n\n            error('Ошибка', data.message);\n            return _context.abrupt(\"return\");\n\n          case 9:\n            document.location.reload(true);\n            _context.next = 14;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](0);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 12]]);\n  }, []);\n  return React.createElement(\"div\", {\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, React.createElement(AvatarHost, {\n    onClick: toggleOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(UserCircle, {\n    width: 24,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), React.createElement(AvatarName, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, user.name), React.createElement(ChevronIcon, {\n    open: open,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  })), React.createElement(AvatarMenuWrapper, {\n    open: open,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(AvatarMenuItem, {\n    href: \"/calls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(Edit, {\n    width: 16,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), React.createElement(AvatarMenuText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"\\u0432\\u044B\\u0437\\u043E\\u0432\\u044B\")), React.createElement(AvatarMenuItem, {\n    href: \"/all\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(Spreadsheet, {\n    width: 16,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(AvatarMenuText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"\\u0432\\u0441\\u0435 \\u0431\\u0443\\u0440\\u0438\\u043C\\u0435\")), React.createElement(AvatarMenuItem, {\n    href: \"/my\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(OpenBook, {\n    width: 16,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(AvatarMenuText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"\\u043C\\u043E\\u0438\")), React.createElement(AvatarMenuItem, {\n    href: \"/rules\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(PencilRuler, {\n    width: 16,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), React.createElement(AvatarMenuText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0430\")), React.createElement(AvatarMenuItem, {\n    href: \"/settings\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(Settings, {\n    width: 16,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), React.createElement(AvatarMenuText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"\\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\")), React.createElement(AvatarMenuItem, {\n    onClick: logOut,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(LogOut, {\n    width: 16,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(AvatarMenuText, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"\\u0432\\u044B\\u0439\\u0442\\u0438\"))));\n};","map":{"version":3,"sources":["C:/Users/alexs/Desktop/Алексей/code/burime/client/components/Header/Avatar/Avatar.tsx"],"names":["React","useState","useCallback","useRef","UserCircle","LogOut","Settings","OpenBook","Edit","Spreadsheet","PencilRuler","useClickAway","AvatarHost","AvatarMenuWrapper","AvatarMenuItem","AvatarName","AvatarMenuText","signOut","error","ChevronIcon","Avatar","user","open","setOpen","toggleOpen","ref","logOut","status","data","message","document","location","reload","name"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useRef } from 'react';\nimport { UserCircle } from '@styled-icons/fa-solid/UserCircle';\nimport { LogOut } from '@styled-icons/boxicons-regular/LogOut';\nimport { Settings } from '@styled-icons/material/Settings';\nimport { OpenBook } from '@styled-icons/entypo/OpenBook';\nimport { Edit } from '@styled-icons/boxicons-regular/Edit';\nimport { Spreadsheet } from '@styled-icons/boxicons-regular/Spreadsheet';\nimport { PencilRuler } from '@styled-icons/remix-line/PencilRuler';\n\nimport { useClickAway } from 'react-use';\nimport {\n    AvatarHost,\n    AvatarMenuWrapper,\n    AvatarMenuItem,\n    AvatarName,\n    AvatarMenuText,\n} from './styled';\nimport { UserModel } from '../../../models/user';\nimport { signOut } from '../../../services/api/auth';\nimport { error } from '../../../services/toast';\nimport { ChevronIcon } from '../../Common/styled';\n\ninterface AvatarProps {\n    user: UserModel\n}\n\nexport const Avatar = ({ user }: AvatarProps) => {\n    const [open, setOpen] = useState(false);\n    const toggleOpen = useCallback(() => setOpen(!open), [open]);\n    const ref = useRef(null);\n    useClickAway(ref, () => setOpen(false));\n    const logOut = useCallback(async () => {\n        try {\n            const { status, data } = await signOut()\n            if (status !== 200) {\n                error('Ошибка', data.message)\n                return\n            }\n            document.location.reload(true)\n        } catch {}\n    }, []);\n\n    return (\n        <div ref={ref}>\n            <AvatarHost onClick={toggleOpen}>\n                <UserCircle width={24}/>\n                <AvatarName>{user.name}</AvatarName>\n                <ChevronIcon open={open} />\n            </AvatarHost>\n            <AvatarMenuWrapper open={open}>\n                <AvatarMenuItem href='/calls'>\n                    <Edit width={16}/>\n                    <AvatarMenuText>вызовы</AvatarMenuText>\n                </AvatarMenuItem>\n                <AvatarMenuItem href='/all'>\n                    <Spreadsheet width={16}/>\n                    <AvatarMenuText>все буриме</AvatarMenuText>\n                </AvatarMenuItem>\n                <AvatarMenuItem href='/my'>\n                    <OpenBook width={16}/>\n                    <AvatarMenuText>мои</AvatarMenuText>\n                </AvatarMenuItem>\n                <AvatarMenuItem href='/rules'>\n                    <PencilRuler width={16}/>\n                    <AvatarMenuText>правила</AvatarMenuText>\n                </AvatarMenuItem>\n                <AvatarMenuItem href='/settings'>\n                    <Settings width={16}/>\n                    <AvatarMenuText>настройки</AvatarMenuText>\n                </AvatarMenuItem>\n                <AvatarMenuItem onClick={logOut}>\n                    <LogOut width={16}/>\n                    <AvatarMenuText>выйти</AvatarMenuText>\n                </AvatarMenuItem>\n            </AvatarMenuWrapper>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}