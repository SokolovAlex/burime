{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alexs\\\\Desktop\\\\\\u0410\\u043B\\u0435\\u043A\\u0441\\u0435\\u0439\\\\code\\\\burime\\\\client\\\\components\\\\molecules\\\\BurimeCard\\\\BurimeEdit.tsx\";\nvar __jsx = React.createElement;\nimport React, { useMemo, useState, useCallback } from 'react';\nimport { BurimeEditHost, FlexRow, SelectWrapper, BurimeEditBody, BurimeEditFooter, IconButton } from './styled';\nimport { BurimeStepsAmountOptions, StepDurationOptions } from '../../../models/burime';\nimport { Title } from '../../atoms/Title/Title';\nimport { useUser } from '../../../services/contexts/auth';\nimport Select from 'react-select';\nimport { Input, InputRow, InputLabel } from '../../atoms/Input/Input';\nimport { Size } from '../../../constants/enums';\nimport { Button, ButtonType } from '../../atoms/Button/Button';\nimport { Random } from '@styled-icons/fa-solid/Random';\nimport { getRandomTitle } from '../../../services/api/burime';\nexport var BurimeEdit = function BurimeEdit(_ref) {\n  var burime = _ref.burime,\n      onSave = _ref.onSave,\n      onCancel = _ref.onCancel;\n  var user = useUser();\n  var isNew = useMemo(function () {\n    return !burime.id;\n  }, []);\n\n  var _useState = useState(BurimeStepsAmountOptions[1]),\n      selectedSteps = _useState[0],\n      setSelectedSteps = _useState[1];\n\n  var _useState2 = useState(StepDurationOptions[0]),\n      selectedDuration = _useState2[0],\n      setSelectedDuration = _useState2[1];\n\n  var _useState3 = useState(burime.theme),\n      theme = _useState3[0],\n      setTheme = _useState3[1];\n\n  var onStepChange = useCallback(function (option) {\n    return setSelectedSteps(option);\n  }, []);\n  var onGetRandomTitle = useCallback(function () {\n    return getRandomTitle().then(function (_ref2) {\n      var title = _ref2.title;\n      return setTheme(title);\n    });\n  }, []);\n  var onDurationChange = useCallback(function (option) {\n    return setSelectedDuration(option);\n  }, []);\n  var onThemeChange = useCallback(function (e) {\n    return setTheme(e.currentTarget.value);\n  }, []);\n  var onBurimeSave = useCallback(function () {\n    if (onSave && burime) {\n      burime.stepDuration = selectedDuration.value;\n      burime.stepsAmount = selectedSteps.value;\n      burime.theme = theme;\n      burime.user1 = user;\n      onSave(burime);\n    }\n  }, [burime, theme, selectedSteps, selectedDuration]);\n  return React.createElement(BurimeEditHost, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(BurimeEditBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(Title, {\n    size: Size.sm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, isNew ? 'Создать буриме' : 'Редактировать буриме'), React.createElement(InputRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(InputLabel, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"), React.createElement(Input, {\n    onChange: onThemeChange,\n    value: theme,\n    placeholder: \"\\u0432\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0437\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), React.createElement(IconButton, {\n    onClick: onGetRandomTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Random, {\n    width: 24,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }))), React.createElement(FlexRow, {\n    withMargin: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(SelectWrapper, {\n    margin: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(InputLabel, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u044C\"), React.createElement(Select, {\n    isSearchable: false,\n    value: selectedSteps,\n    onChange: onStepChange,\n    options: BurimeStepsAmountOptions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  })), React.createElement(SelectWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(InputLabel, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"\\u0412\\u0440\\u0435\\u043C\\u044F \\u043D\\u0430 \\u0441\\u0442\\u0440\\u043E\\u043A\\u0443\"), React.createElement(Select, {\n    isSearchable: false,\n    isDisabled: true,\n    value: selectedDuration,\n    onChange: onDurationChange,\n    options: StepDurationOptions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"\\u0410\\u0432\\u0442\\u043E\\u0440: \"), React.createElement(\"i\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, user && user.name))), React.createElement(BurimeEditFooter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: ButtonType.white,\n    onClick: function onClick() {\n      return onCancel && onCancel();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"), React.createElement(Button, {\n    type: ButtonType.white,\n    onClick: function onClick() {\n      return onBurimeSave();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, isNew ? 'Создать' : 'Сохранить')));\n};","map":{"version":3,"sources":["C:/Users/alexs/Desktop/Алексей/code/burime/client/components/molecules/BurimeCard/BurimeEdit.tsx"],"names":["React","useMemo","useState","useCallback","BurimeEditHost","FlexRow","SelectWrapper","BurimeEditBody","BurimeEditFooter","IconButton","BurimeStepsAmountOptions","StepDurationOptions","Title","useUser","Select","Input","InputRow","InputLabel","Size","Button","ButtonType","Random","getRandomTitle","BurimeEdit","burime","onSave","onCancel","user","isNew","id","selectedSteps","setSelectedSteps","selectedDuration","setSelectedDuration","theme","setTheme","onStepChange","option","onGetRandomTitle","then","title","onDurationChange","onThemeChange","e","currentTarget","value","onBurimeSave","stepDuration","stepsAmount","user1","sm","name","white"],"mappings":"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","sourcesContent":["import React, { useMemo, useState, useCallback, ChangeEvent } from 'react';\nimport {\n    BurimeEditHost,\n    FlexRow,\n    SelectWrapper,\n    BurimeEditBody,\n    BurimeEditFooter,\n    IconButton,\n} from './styled';\nimport {\n    BurimeModel,\n    IOption,\n    BurimeStepsAmountOptions,\n    StepDurationOptions,\n} from '../../../models/burime';\nimport { Title } from '../../atoms/Title/Title';\nimport { useUser } from '../../../services/contexts/auth';\nimport Select from 'react-select';\nimport { UserModel } from '../../../models/user';\nimport { Input, InputRow, InputLabel } from '../../atoms/Input/Input';\nimport { Size } from '../../../constants/enums';\nimport { Button, ButtonType } from '../../atoms/Button/Button';\nimport { Random } from '@styled-icons/fa-solid/Random'\nimport { getRandomTitle } from '../../../services/api/burime';\n\ninterface BurimeEditProps {\n    burime: BurimeModel;\n    onSave?: (burime: BurimeModel) => void;\n    onCancel?: () => void;\n}\n\nexport const BurimeEdit = ({ burime, onSave, onCancel }: BurimeEditProps) => {\n    const user = useUser();\n    const isNew = useMemo(() => !burime.id, []);\n    const [selectedSteps, setSelectedSteps] = useState<IOption>(\n        BurimeStepsAmountOptions[1]\n    );\n    const [selectedDuration, setSelectedDuration] = useState<IOption>(\n        StepDurationOptions[0]\n    );\n    const [theme, setTheme] = useState(burime.theme);\n\n    const onStepChange = useCallback(option => setSelectedSteps(option), []);\n    const onGetRandomTitle = useCallback(\n        () => getRandomTitle().then(({ title }) => setTheme(title)),\n        []\n    );\n\n    const onDurationChange = useCallback(\n        option => setSelectedDuration(option),\n        []\n    );\n\n    const onThemeChange = useCallback(\n        (e: ChangeEvent<HTMLInputElement>) => setTheme(e.currentTarget.value),\n        []\n    );\n\n    const onBurimeSave = useCallback(() => {\n        if (onSave && burime) {\n            burime.stepDuration = selectedDuration.value;\n            burime.stepsAmount = selectedSteps.value;\n            burime.theme = theme;\n            burime.user1 = user as UserModel;\n            onSave(burime);\n        }\n    }, [burime, theme, selectedSteps, selectedDuration]);\n\n    return (\n        <BurimeEditHost>\n            <BurimeEditBody>\n                <Title size={Size.sm}>\n                    {isNew ? 'Создать буриме' : 'Редактировать буриме'}\n                </Title>\n                <InputRow>\n                    <InputLabel>Заголовок</InputLabel>\n                    <Input\n                        onChange={onThemeChange}\n                        value={theme}\n                        placeholder=\"введите заголовок\"\n                    ></Input>\n                    <IconButton onClick={onGetRandomTitle}><Random width={24}/></IconButton>\n                </InputRow>\n\n                <FlexRow withMargin>\n                    <SelectWrapper margin>\n                        <InputLabel>Продолжительность</InputLabel>\n                        <Select\n                            isSearchable={false}\n                            value={selectedSteps}\n                            onChange={onStepChange}\n                            options={BurimeStepsAmountOptions}\n                        />\n                    </SelectWrapper>\n                    <SelectWrapper>\n                        <InputLabel>Время на строку</InputLabel>\n                        <Select\n                            isSearchable={false}\n                            isDisabled\n                            value={selectedDuration}\n                            onChange={onDurationChange}\n                            options={StepDurationOptions}\n                        />\n                    </SelectWrapper>\n                </FlexRow>\n                <div>\n                    <span>Автор: </span>\n                    <i>{user && user.name}</i>\n                </div>\n            </BurimeEditBody>\n            <BurimeEditFooter>\n                <Button\n                    type={ButtonType.white}\n                    onClick={() => onCancel && onCancel()}\n                >\n                    Отмена\n                </Button>\n                <Button type={ButtonType.white} onClick={() => onBurimeSave()}>\n                    {isNew ? 'Создать' : 'Сохранить'}\n                </Button>\n            </BurimeEditFooter>\n        </BurimeEditHost>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}