{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\alexs\\\\Desktop\\\\\\u0410\\u043B\\u0435\\u043A\\u0441\\u0435\\u0439\\\\code\\\\burime\\\\client\\\\services\\\\socket.tsx\";\nvar __jsx = React.createElement;\nimport Socket from 'socket.io-client';\nimport React, { createContext, useContext, Component } from 'react';\nvar serverUrl = 'http://localhost:3003';\nexport var SocketContext = createContext(null);\nexport var useSocket = function useSocket() {\n  return useContext(SocketContext);\n};\nexport var SocketProvider =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SocketProvider, _Component);\n\n  function SocketProvider(props) {\n    var _this;\n\n    _classCallCheck(this, SocketProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SocketProvider).call(this, props));\n    _this.state = {\n      socket: null\n    };\n\n    if (!props.user) {\n      return _possibleConstructorReturn(_this);\n    }\n\n    _this.state = {\n      socket: Socket(serverUrl, props.opts || {\n        query: \"user=\".concat(props.user.email)\n      })\n    };\n    return _this;\n  }\n\n  _createClass(SocketProvider, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(SocketContext.Provider, {\n        value: this.state.socket,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return SocketProvider;\n}(Component);","map":{"version":3,"sources":["C:/Users/alexs/Desktop/Алексей/code/burime/client/services/socket.tsx"],"names":["Socket","React","createContext","useContext","Component","serverUrl","SocketContext","useSocket","SocketProvider","props","state","socket","user","opts","query","email","children"],"mappings":";;;;;;;AAAA,OAAOA,MAAP,MAAmB,kBAAnB;AACA,OAAOC,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,SAA3C,QAA4D,OAA5D;AAGA,IAAMC,SAAS,GAAG,uBAAlB;AAEA,OAAO,IAAMC,aAAa,GAAGJ,aAAa,CAA+B,IAA/B,CAAnC;AAEP,OAAO,IAAMK,SAAS,GAAG,SAAZA,SAAY,GAAM;AAC3B,SAAOJ,UAAU,CAACG,aAAD,CAAjB;AACH,CAFM;AAIP,WAAaE,cAAb;AAAA;AAAA;AAAA;;AASI,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,wFAAMA,KAAN;AADe,UALnBC,KAKmB,GAHf;AACAC,MAAAA,MAAM,EAAE;AADR,KAGe;;AAEf,QAAI,CAACF,KAAK,CAACG,IAAX,EAAiB;AACb;AACH;;AACD,UAAKF,KAAL,GAAa;AACTC,MAAAA,MAAM,EAAEX,MAAM,CAACK,SAAD,EAAYI,KAAK,CAACI,IAAN,IAAc;AACpCC,QAAAA,KAAK,iBAAUL,KAAK,CAACG,IAAN,CAAWG,KAArB;AAD+B,OAA1B;AADL,KAAb;AALe;AAUlB;;AAnBL;AAAA;AAAA,6BAqBa;AACL,aACI,oBAAC,aAAD,CAAe,QAAf;AAAwB,QAAA,KAAK,EAAE,KAAKL,KAAL,CAAWC,MAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAKF,KAAL,CAAWO,QADhB,CADJ;AAKH;AA3BL;;AAAA;AAAA,EAAoCZ,SAApC","sourcesContent":["import Socket from 'socket.io-client'\nimport React, { createContext, useContext, Component } from 'react'\nimport { UserModel } from '../models/user'\n\nconst serverUrl = 'http://localhost:3003'\n\nexport const SocketContext = createContext<SocketIOClient.Socket | null>(null)\n\nexport const useSocket = () => {\n    return useContext(SocketContext) as SocketIOClient.Socket\n}\n\nexport class SocketProvider extends Component<{\n    user: UserModel | undefined\n    opts?: any\n}> {\n    state: {\n        socket: SocketIOClient.Socket | null\n    } = {\n        socket: null,\n    }\n    constructor(props) {\n        super(props)\n        if (!props.user) {\n            return\n        }\n        this.state = {\n            socket: Socket(serverUrl, props.opts || { \n                query: `user=${props.user.email}`,\n            }),\n        }\n    }\n\n    render() {\n        return (\n            <SocketContext.Provider value={this.state.socket}>\n                {this.props.children}\n            </SocketContext.Provider>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}