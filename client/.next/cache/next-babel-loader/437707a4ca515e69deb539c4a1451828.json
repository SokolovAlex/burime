{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"C:\\\\Users\\\\alexs\\\\Desktop\\\\\\u0410\\u043B\\u0435\\u043A\\u0441\\u0435\\u0439\\\\code\\\\burime\\\\client\\\\components\\\\AuthModal\\\\AuthModal.tsx\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useState } from 'react';\nimport { LoginContainer } from './styled';\nimport { FormDialog } from '../Dialog/Dialog';\nimport { registration, signIn } from '../../services/api/auth';\nimport { SignIn } from './SignIn';\nimport { SignUp } from './SignUp';\nimport { success, error } from '../../services/toast';\nexport var AuthModal = function AuthModal(_ref) {\n  var isOpen = _ref.isOpen,\n      setOpen = _ref.setOpen;\n\n  var _useState = useState(true),\n      signInMode = _useState[0],\n      setSignIn = _useState[1];\n\n  var _useState2 = useState(),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(),\n      password = _useState3[0],\n      setPassword = _useState3[1];\n\n  var onLogin = useCallback(\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(_ref2) {\n      var email, password, _ref4, status, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              email = _ref2.email, password = _ref2.password;\n              _context.next = 3;\n              return signIn({\n                email: email,\n                password: password\n              });\n\n            case 3:\n              _ref4 = _context.sent;\n              status = _ref4.status;\n              data = _ref4.data;\n\n              if (!(status !== 200)) {\n                _context.next = 9;\n                break;\n              }\n\n              error('Ошибка', data.message);\n              return _context.abrupt(\"return\");\n\n            case 9:\n              document.location.reload(true);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }(), []);\n  var onRegistration = useCallback(\n  /*#__PURE__*/\n  function () {\n    var _ref6 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(_ref5) {\n      var name, email, password, _ref7, data, status;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              name = _ref5.name, email = _ref5.email, password = _ref5.password;\n              _context2.next = 3;\n              return registration({\n                name: name,\n                email: email,\n                password: password\n              });\n\n            case 3:\n              _ref7 = _context2.sent;\n              data = _ref7.data;\n              status = _ref7.status;\n\n              if (!(status !== 200)) {\n                _context2.next = 9;\n                break;\n              }\n\n              error('Ошибка', data.message);\n              return _context2.abrupt(\"return\");\n\n            case 9:\n              success('Успешно', 'Вы зарегистрированы!');\n              setEmail(email);\n              setPassword(password);\n              setSignIn(true);\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref6.apply(this, arguments);\n    };\n  }(), []);\n  var toggleMode = useCallback(function () {\n    setSignIn(!signInMode);\n  }, [signInMode]);\n  return React.createElement(FormDialog, {\n    isOpen: isOpen,\n    setOpen: setOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(React.Fragment, null, React.createElement(LoginContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, signInMode ? React.createElement(SignIn, {\n    email: email,\n    password: password,\n    onSubmit: onLogin,\n    onToggle: toggleMode,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }) : React.createElement(SignUp, {\n    onSubmit: onRegistration,\n    onToggle: toggleMode,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }))));\n};","map":{"version":3,"sources":["C:/Users/alexs/Desktop/Алексей/code/burime/client/components/AuthModal/AuthModal.tsx"],"names":["React","useCallback","useState","LoginContainer","FormDialog","registration","signIn","SignIn","SignUp","success","error","AuthModal","isOpen","setOpen","signInMode","setSignIn","email","setEmail","password","setPassword","onLogin","status","data","message","document","location","reload","onRegistration","name","toggleMode"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react'\nimport { LoginContainer } from './styled'\nimport { FormDialog } from '../Dialog/Dialog'\nimport { registration, signIn } from '../../services/api/auth'\nimport { SignIn } from './SignIn'\nimport { SignUp } from './SignUp'\nimport { success, error } from '../../services/toast'\n\ninterface AuthModalProps {\n    isOpen: boolean\n    setOpen: (state: boolean) => void\n}\n\nexport const AuthModal = ({ isOpen, setOpen }: AuthModalProps) => {\n    const [signInMode, setSignIn] = useState(true);\n    const [email, setEmail] = useState();\n    const [password, setPassword] = useState();\n\n    const onLogin = useCallback(async ({ email, password }) => {\n        const { status, data } = await signIn({\n            email,\n            password,\n        })\n\n        if (status !== 200) {\n            error('Ошибка', data.message)\n            return\n        }\n        document.location.reload(true)\n    }, [])\n\n    const onRegistration = useCallback(async ({ name, email, password }) => {\n        const { data, status } = await registration({\n            name,\n            email,\n            password,\n        })\n\n        if (status !== 200) {\n            error('Ошибка', data.message)\n            return\n        }\n        success('Успешно', 'Вы зарегистрированы!')\n        setEmail(email)\n        setPassword(password)\n        setSignIn(true)\n    }, [])\n\n    const toggleMode = useCallback(() => {\n        setSignIn(!signInMode)\n    }, [signInMode])\n\n    return (\n        <FormDialog isOpen={isOpen} setOpen={setOpen}>\n            <>\n                <LoginContainer>\n                    {signInMode ? (\n                        <SignIn\n                            email={email}\n                            password={password}\n                            onSubmit={onLogin}\n                            onToggle={toggleMode}\n                        ></SignIn>\n                    ) : (\n                        <SignUp\n                            onSubmit={onRegistration}\n                            onToggle={toggleMode}\n                        ></SignUp>\n                    )}\n                </LoginContainer>\n            </>\n        </FormDialog>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}